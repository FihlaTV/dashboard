SEA3D.Sphere=function(a,b,c){this.name=a;this.data=b;this.sea3d=c;this.radius=b.readFloat()};SEA3D.Sphere.prototype.type="sph";SEA3D.Box=function(a,b,c){this.name=a;this.data=b;this.sea3d=c;this.width=b.readFloat();this.height=b.readFloat();this.depth=b.readFloat()};SEA3D.Box.prototype.type="box";SEA3D.Cone=function(a,b,c){this.name=a;this.data=b;this.sea3d=c;this.radius=b.readFloat();this.height=b.readFloat()};SEA3D.Cone.prototype.type="cone";
SEA3D.Capsule=function(a,b,c){this.name=a;this.data=b;this.sea3d=c;this.radius=b.readFloat();this.height=b.readFloat()};SEA3D.Capsule.prototype.type="cap";SEA3D.Cylinder=function(a,b,c){this.name=a;this.data=b;this.sea3d=c;this.radius=b.readFloat();this.height=b.readFloat()};SEA3D.Cylinder.prototype.type="cyl";SEA3D.ConvexGeometry=function(a,b,c){this.name=a;this.data=b;this.sea3d=c;this.geometry=c.getObject(b.readUInt());this.subGeometryIndex=b.readUByte()};SEA3D.ConvexGeometry.prototype.type="gs";
SEA3D.TriangleGeometry=function(a,b,c){this.name=a;this.data=b;this.sea3d=c;this.geometry=c.getObject(b.readUInt());this.subGeometryIndex=b.readUByte()};SEA3D.TriangleGeometry.prototype.type="sgs";SEA3D.Compound=function(a,b,c){this.name=a;this.data=b;this.sea3d=c;this.compounds=[];a=b.readUByte();for(var d=0;d<a;d++)this.compounds.push({shape:c.getObject(b.readUInt()),transform:b.readMatrix()})};SEA3D.Compound.prototype.type="cmps";
SEA3D.Physics=function(a,b,c){this.name=a;this.data=b;this.sea3d=c;this.attrib=b.readUShort();this.shape=c.getObject(b.readUInt());this.attrib&1?this.target=c.getObject(b.readUInt()):this.transform=b.readMatrix();this.attrib&2&&(this.offset=b.readMatrix());this.attrib&4&&(this.scripts=b.readScriptList(c));this.attrib&16&&(this.attributes=c.getObject(b.readUInt()))};SEA3D.Physics.prototype.readTag=function(a,b,c){};
SEA3D.RigidBodyBase=function(a,b,c){SEA3D.Physics.call(this,a,b,c);this.attrib&32?(this.linearDamping=b.readFloat(),this.angularDamping=b.readFloat()):this.angularDamping=this.linearDamping=0;this.mass=b.readFloat();this.friction=b.readFloat();this.restitution=b.readFloat()};SEA3D.RigidBodyBase.prototype=Object.create(SEA3D.Physics.prototype);SEA3D.RigidBodyBase.prototype.constructor=SEA3D.RigidBodyBase;SEA3D.RigidBody=function(a,b,c){SEA3D.RigidBodyBase.call(this,a,b,c);b.readTags(this.readTag.bind(this))};
SEA3D.RigidBody.prototype=Object.create(SEA3D.RigidBodyBase.prototype);SEA3D.RigidBody.prototype.constructor=SEA3D.RigidBody;SEA3D.RigidBody.prototype.type="rb";
SEA3D.CarController=function(a,b,c){SEA3D.RigidBodyBase.call(this,a,b,c);this.suspensionStiffness=b.readFloat();this.suspensionCompression=b.readFloat();this.suspensionDamping=b.readFloat();this.maxSuspensionTravelCm=b.readFloat();this.frictionSlip=b.readFloat();this.maxSuspensionForce=b.readFloat();this.dampingCompression=b.readFloat();this.dampingRelaxation=b.readFloat();a=b.readUByte();this.wheel=[];for(var d=0;d<a;d++)this.wheel[d]=new SEA3D.CarController.Wheel(b,c);b.readTags(this.readTag.bind(this))};
SEA3D.CarController.Wheel=function(a,b){this.data=a;this.sea3d=b;this.attrib=a.readUShort();this.isFront=0!=(this.attrib&1);this.attrib&2&&(this.target=b.getObject(a.readUInt()));this.attrib&4&&(this.offset=a.readMatrix());this.pos=a.readVector3();this.dir=a.readVector3();this.axle=a.readVector3();this.radius=a.readFloat();this.suspensionRestLength=a.readFloat()};SEA3D.CarController.prototype=Object.create(SEA3D.RigidBodyBase.prototype);SEA3D.CarController.prototype.constructor=SEA3D.CarController;
SEA3D.CarController.prototype.type="carc";SEA3D.Constraints=function(a,b,c){this.name=a;this.data=b;this.sea3d=c;this.attrib=b.readUShort();this.disableCollisionsBetweenBodies=this.attrib&1;this.targetA=c.getObject(b.readUInt());this.pointA=b.readVector3();this.attrib&2&&(this.targetB=c.getObject(b.readUInt()),this.pointB=b.readVector3())};SEA3D.P2PConstraint=function(a,b,c){this.name=a;this.data=b;this.sea3d=c;SEA3D.Constraints.call(this,a,b,c)};SEA3D.P2PConstraint.prototype=Object.create(SEA3D.Constraints.prototype);
SEA3D.P2PConstraint.prototype.constructor=SEA3D.P2PConstraint;SEA3D.P2PConstraint.prototype.type="p2pc";SEA3D.HingeConstraint=function(a,b,c){SEA3D.Constraints.call(this,a,b,c);this.axisA=b.readVector3();this.attrib&1&&(this.axisB=b.readVector3());this.attrib&4&&(this.limit={low:b.readFloat(),high:b.readFloat(),softness:b.readFloat(),biasFactor:b.readFloat(),relaxationFactor:b.readFloat()});this.attrib&8&&(this.angularMotor={velocity:b.readFloat(),impulse:b.readFloat()})};
SEA3D.HingeConstraint.prototype=Object.create(SEA3D.Constraints.prototype);SEA3D.HingeConstraint.prototype.constructor=SEA3D.HingeConstraint;SEA3D.HingeConstraint.prototype.type="hnec";SEA3D.ConeTwistConstraint=function(a,b,c){SEA3D.Constraints.call(this,a,b,c);this.axisA=b.readVector3();this.attrib&1&&(this.axisB=b.readVector3());this.attrib&4&&(this.limit={swingSpan1:b.readFloat(),swingSpan2:b.readFloat(),twistSpan:b.readFloat(),softness:b.readFloat(),biasFactor:b.readFloat(),relaxationFactor:b.readFloat()})};
SEA3D.ConeTwistConstraint.prototype=Object.create(SEA3D.Constraints.prototype);SEA3D.ConeTwistConstraint.prototype.constructor=SEA3D.ConeTwistConstraint;SEA3D.ConeTwistConstraint.prototype.type="ctwc";
SEA3D.File.setExtension(function(){this.addClass(SEA3D.Sphere);this.addClass(SEA3D.Box);this.addClass(SEA3D.Cone);this.addClass(SEA3D.Capsule);this.addClass(SEA3D.Cylinder);this.addClass(SEA3D.ConvexGeometry);this.addClass(SEA3D.TriangleGeometry);this.addClass(SEA3D.Compound);this.addClass(SEA3D.RigidBody);this.addClass(SEA3D.P2PConstraint);this.addClass(SEA3D.HingeConstraint);this.addClass(SEA3D.ConeTwistConstraint);this.addClass(SEA3D.CarController)});SEA3D.AMMO={world:null,rigidBodies:[],rigidBodiesTarget:[],rigidBodiesEnabled:[],constraints:[],vehicles:[],vehiclesWheels:[],ACTIVE:1,ISLAND_SLEEPING:2,WANTS_DEACTIVATION:3,DISABLE_DEACTIVATION:4,DISABLE_SIMULATION:5,VERSION:.8,init:function(a,b,c){a=void 0!==a?a:-90.8;this.worldScale=void 0==b?1:b;this.broadphase=void 0==c?"bvt":c;this.solver=new Ammo.btSequentialImpulseConstraintSolver;this.collisionConfig=new Ammo.btDefaultCollisionConfiguration;this.dispatcher=new Ammo.btCollisionDispatcher(this.collisionConfig);
switch(this.broadphase){case "bvt":this.broadphase=new Ammo.btDbvtBroadphase;break;case "sap":this.broadphase=new Ammo.btAxisSweep3(new Ammo.btVector3(-this.worldScale,-this.worldScale,-this.worldScale),new Ammo.btVector3(this.worldScale,this.worldScale,this.worldScale),4096);break;case "simple":this.broadphase=new Ammo.btSimpleBroadphase}this.world=new Ammo.btDiscreteDynamicsWorld(this.dispatcher,this.broadphase,this.solver,this.collisionConfig);this.setGravity(a);console.log("THREE.AMMO "+this.VERSION)},
setGravity:function(a){this.gravity=a;this.world.setGravity(new Ammo.btVector3(0,a,0));return this},getGravity:function(){return this.gravity},setEnabledRigidBody:function(a,b){var c=this.rigidBodies.indexOf(a);if(this.rigidBodiesEnabled[c]!=b)return b?this.world.addRigidBody(a):this.world.removeRigidBody(a),this.rigidBodiesEnabled[c]=!0,this},getEnabledRigidBody:function(a){return this.rigidBodiesEnabled[this.rigidBodies.indexOf(a)]},addRigidBody:function(a,b,c){c=void 0!==c?c:!0;this.rigidBodies.push(a);
this.rigidBodiesTarget.push(b);this.rigidBodiesEnabled.push(!1);this.setEnabledRigidBody(a,c);return this},removeRigidBody:function(a,b){var c=this.rigidBodies.indexOf(a);this.setEnabledRigidBody(a,!1);this.rigidBodies.splice(c,1);this.rigidBodiesTarget.splice(c,1);this.rigidBodiesEnabled.splice(c,1);b&&Ammo.destroy(a);return this},containsRigidBody:function(a){return-1<this.rigidBodies.indexOf(a)},addConstraint:function(a,b){b=void 0==b?!0:b;this.constraints.push(a);this.world.addConstraint(a,b);
return this},removeConstraint:function(a,b){this.constraints.splice(this.constraints.indexOf(a),1);this.world.removeConstraint(a);b&&Ammo.destroy(a);return this},containsConstraint:function(a){return-1<this.constraints.indexOf(rb)},addVehicle:function(a,b){this.vehicles.push(a);this.vehiclesWheels.push(void 0!=b?b:[]);this.world.addAction(a);return this},removeVehicle:function(a,b){var c=this.vehicles.indexOf(a);this.vehicles.splice(c,1);this.vehiclesWheels.splice(c,1);this.world.removeAction(a);
b&&Ammo.destroy(a);return this},containsVehicle:function(a){return-1<this.vehicles.indexOf(a)},createTriangleMesh:function(a,b,c){b=void 0==b?-1:b;c=void 0==c?!1:c;var d=new Ammo.btTriangleMesh,k=new Ammo.btVector3(0,0,0),f=new Ammo.btVector3(0,0,0),e=new Ammo.btVector3(0,0,0),g=a.getAttribute("position").array,h=a.getIndex().array,l=0<=b?a.groups[b]:void 0;a=l?l.count:h.length;b=1/this.worldScale;for(l=l?l.start:0;l<a;l+=3){var m=3*h[l],n=3*h[l+1],p=3*h[l+2];k.setValue(g[m]*b,g[m+1]*b,g[m+2]*b);
f.setValue(g[n]*b,g[n+1]*b,g[n+2]*b);e.setValue(g[p]*b,g[p+1]*b,g[p+2]*b);d.addTriangle(k,f,e,c)}return d},createConvexHull:function(a,b){b=void 0==b?-1:b;var c=new Ammo.btConvexHullShape;new Ammo.btVector3(0,0,0);for(var d=a.getAttribute("position").array,k=a.getIndex().array,f=0<=b?a.groups[b]:void 0,e=f?f.count:k.length,g=1/this.worldScale,f=f?f.start:0;f<e;f+=3){var h=3*k[f],h=new Ammo.btVector3(d[h]*g,d[h+1]*g,d[h+2]*g);c.addPoint(h)}return c},getTargetByRigidBody:function(a){return this.rigidBodiesTarget[this.rigidBodies.indexOf(a)]},
getRigidBodyByTarget:function(a){return this.rigidBodies[this.rigidBodiesTarget.indexOf(a)]},getTransformFromMatrix:function(a){var b=new Ammo.btTransform,c=THREE.SEA3D.VECBUF.setFromMatrixPosition(a);b.setOrigin(new Ammo.btVector3(c.x,c.y,c.z));c=THREE.SEA3D.VECBUF.setFromMatrixScale(a);a.scale(c.set(1/c.x,1/c.y,1/c.z));a=(new THREE.Quaternion).setFromRotationMatrix(a);c=new Ammo.btQuaternion;c.setValue(a.x,a.y,a.z,a.w);b.setRotation(c);Ammo.destroy(c);return b},getMatrixFromTransform:function(a){var b=
new THREE.Vector3,c=new THREE.Quaternion,d=new THREE.Vector3(1,1,1);return function(a,f){f=f||new THREE.Matrix4;var e=a.getOrigin(),g=a.getRotation();b.set(e.x(),e.y(),e.z());c.set(g.x(),g.y(),g.z(),g.w());f.compose(b,c,d);return f}}(),updateTargetTransform:function(){var a=new THREE.Matrix4,b=new THREE.Vector3,c=new THREE.Quaternion,d=new THREE.Vector3(1,1,1);return function(k,f,e){var g=f.getOrigin();f=f.getRotation();e?(b.set(g.x(),g.y(),g.z()),c.set(f.x(),f.y(),f.z(),f.w()),a.compose(b,c,d),a.multiplyMatrices(a,
e),k.position.setFromMatrixPosition(a),k.quaternion.setFromRotationMatrix(a)):(k.position.set(g.x(),g.y(),g.z()),k.quaternion.set(f.x(),f.y(),f.z(),f.w()));return this}}(),update:function(a,b,c){this.world.stepSimulation(a,b||0,c||.06);for(a=0;a<this.vehicles.length;a++){c=this.vehicles[a];var d=c.getNumWheels(),k=this.vehiclesWheels[a];for(b=0;b<d;b++){c.updateWheelTransform(b,!0);var f=c.getWheelTransformWS(b),e=k[b];e&&this.updateTargetTransform(e,f,e.physics?e.physics.offset:null)}}for(a=0;a<
this.rigidBodies.length;a++)b=this.rigidBodies[a],(c=this.rigidBodiesTarget[a])&&b.isActive()&&this.updateTargetTransform(c,b.getWorldTransform(),c.physics?c.physics.offset:null);return this}};THREE.SEA3D.prototype.toAmmoVec3=function(a){return new Ammo.btVector3(a.x,a.y,a.z)};THREE.SEA3D.prototype.readSphere=function(a){var b=new Ammo.btSphereShape(a.radius);this.domain.shapes=this.shapes=this.shapes||[];this.shapes.push(this.objects["shpe/"+a.name]=a.tag=b)};THREE.SEA3D.prototype.readBox=function(a){var b=new Ammo.btBoxShape(new Ammo.btVector3(.5*a.width,.5*a.height,.5*a.depth));this.domain.shapes=this.shapes=this.shapes||[];this.shapes.push(this.objects["shpe/"+a.name]=a.tag=b)};
THREE.SEA3D.prototype.readCone=function(a){var b=new Ammo.btConeShape(a.radius,a.height);this.domain.shapes=this.shapes=this.shapes||[];this.shapes.push(this.objects["shpe/"+a.name]=a.tag=b)};THREE.SEA3D.prototype.readCylinder=function(a){var b=new Ammo.btCylinderShape(new Ammo.btVector3(a.height,a.radius,a.radius));this.domain.shapes=this.shapes=this.shapes||[];this.shapes.push(this.objects["shpe/"+a.name]=a.tag=b)};
THREE.SEA3D.prototype.readCapsule=function(a){var b=new Ammo.btCapsuleShape(a.radius,a.height);this.domain.shapes=this.shapes=this.shapes||[];this.shapes.push(this.objects["shpe/"+a.name]=a.tag=b)};
THREE.SEA3D.prototype.readConvexGeometry=function(a){if(this.config.convexHull)var b=SEA3D.AMMO.createConvexHull(a.geometry.tag,a.subGeometryIndex);else b=SEA3D.AMMO.createTriangleMesh(a.geometry.tag,a.subGeometryIndex),b=new Ammo.btConvexTriangleMeshShape(b,!0);this.domain.shapes=this.shapes=this.shapes||[];this.shapes.push(this.objects["shpe/"+a.name]=a.tag=b)};
THREE.SEA3D.prototype.readTriangleGeometry=function(a){var b=SEA3D.AMMO.createTriangleMesh(a.geometry.tag,a.subGeometryIndex),b=new Ammo.btBvhTriangleMeshShape(b,!0,!0);this.domain.shapes=this.shapes=this.shapes||[];this.shapes.push(this.objects["shpe/"+a.name]=a.tag=b)};
THREE.SEA3D.prototype.readCompound=function(a){for(var b=new Ammo.btCompoundShape,c=0;c<a.compounds.length;c++){var d=a.compounds[c];THREE.SEA3D.MTXBUF.elements=d.transform;var k=SEA3D.AMMO.getTransformFromMatrix(THREE.SEA3D.MTXBUF);b.addChildShape(k,d.shape.tag)}this.domain.shapes=this.shapes=this.shapes||[];this.shapes.push(this.objects["shpe/"+a.name]=a.tag=b)};
THREE.SEA3D.prototype.readRigidBodyBase=function(a){var b=a.shape.tag,c,d;a.target?(d=a.target.tag,d.physics={enabled:!0},d.updateMatrix(),c=SEA3D.AMMO.getTransformFromMatrix(a.target.tag.matrix)):(THREE.SEA3D.MTXBUF.fromArray(a.transform),c=SEA3D.AMMO.getTransformFromMatrix(THREE.SEA3D.MTXBUF));c=new Ammo.btDefaultMotionState(c);var k=new Ammo.btVector3(0,0,0);b.calculateLocalInertia(a.mass,k);b=new Ammo.btRigidBodyConstructionInfo(a.mass,c,b,k);b.set_m_friction(a.friction);b.set_m_restitution(a.restitution);
b.set_m_linearDamping(a.linearDamping);b.set_m_angularDamping(a.angularDamping);c=new Ammo.btRigidBody(b);d&&(d.physics.rigidBody=c,a.offset&&(d.physics.offset=(new THREE.Matrix4).fromArray(a.offset)));Ammo.destroy(b);this.domain.rigidBodies=this.rigidBodies=this.rigidBodies||[];this.rigidBodies.push(this.objects["rb/"+a.name]=a.tag=c);return c};THREE.SEA3D.prototype.readRigidBody=function(a){var b=this.readRigidBodyBase(a);SEA3D.AMMO.addRigidBody(b,a.target?a.target.tag:void 0,this.config.enabledPhysics)};
THREE.SEA3D.prototype.readCarController=function(a){var b=this.readRigidBodyBase(a);b.setActivationState(SEA3D.AMMO.DISABLE_DEACTIVATION);var c=new Ammo.btDefaultVehicleRaycaster(SEA3D.AMMO.world),d=new Ammo.btVehicleTuning;d.set_m_suspensionStiffness(a.suspensionStiffness);d.set_m_suspensionDamping(a.suspensionDamping);d.set_m_suspensionCompression(a.suspensionCompression);d.set_m_maxSuspensionTravelCm(a.maxSuspensionTravelCm);d.set_m_maxSuspensionForce(a.maxSuspensionForce);d.set_m_frictionSlip(a.frictionSlip);
var c=new Ammo.btRaycastVehicle(d,b,c),k=[];c.setCoordinateSystem(0,1,2);for(var f=0;f<a.wheel.length;f++){var e=a.wheel[f],g=c.addWheel(this.toAmmoVec3(e.pos),this.toAmmoVec3(e.dir),this.toAmmoVec3(e.axle),e.suspensionRestLength,e.radius,d,e.isFront),h=k[f]=e.target?e.target.tag:void 0;h&&(h.physics={enabled:!0,rigidBody:g},e.offset&&(h.physics.offset=(new THREE.Matrix4).fromArray(e.offset)),h.parent&&h.parent.remove(h),this.container&&this.container.add(h));g.set_m_suspensionStiffness(a.suspensionStiffness);
g.set_m_wheelsDampingRelaxation(a.dampingRelaxation);g.set_m_wheelsDampingCompression(a.dampingCompression);g.set_m_frictionSlip(a.frictionSlip)}SEA3D.AMMO.addVehicle(c,k);SEA3D.AMMO.addRigidBody(b,a.target?a.target.tag:void 0,this.config.enabledPhysics);this.domain.vehicles=this.vehicles=this.vehicles||[];this.vehicles.push(this.objects["vhc/"+a.name]=a.tag=c)};
THREE.SEA3D.prototype.readP2PConstraint=function(a){var b;b=a.targetB?new Ammo.btPoint2PointConstraint(a.targetA.tag,a.targetB.tag,this.toAmmoVec3(a.pointA),this.toAmmoVec3(a.pointB)):new Ammo.btPoint2PointConstraint(a.targetA.tag,this.toAmmoVec3(a.pointA));SEA3D.AMMO.addConstraint(b);this.domain.constraints=this.constraints=this.constraints||[];this.constraints.push(this.objects["ctnt/"+a.name]=a.tag=b)};
THREE.SEA3D.prototype.readHingeConstraint=function(a){var b;b=a.targetB?new Ammo.btHingeConstraint(a.targetA.tag,a.targetB.tag,this.toAmmoVec3(a.pointA),this.toAmmoVec3(a.pointB),this.toAmmoVec3(a.axisA),this.toAmmoVec3(a.axisB),!1):new Ammo.btHingeConstraint(a.targetA.tag,this.toAmmoVec3(a.pointA),this.toAmmoVec3(a.axisA),!1);a.limit&&b.setLimit(a.limit.low,a.limit.high,a.limit.softness,a.limit.biasFactor,a.limit.relaxationFactor);a.angularMotor&&b.enableAngularMotor(!0,a.angularMotor.velocity,a.angularMotor.impulse);
SEA3D.AMMO.addConstraint(b);this.domain.constraints=this.constraints=this.constraints||[];this.constraints.push(this.objects["ctnt/"+a.name]=a.tag=b)};
THREE.SEA3D.prototype.readConeTwistConstraint=function(a){var b;b=a.targetB?new Ammo.btConeTwistConstraint(a.targetA.tag,a.targetB.tag,this.toAmmoVec3(a.pointA),this.toAmmoVec3(a.pointB),!1):new Ammo.btConeTwistConstraint(a.targetA.tag,this.toAmmoVec3(a.pointA),!1);SEA3D.AMMO.addConstraint(b);this.domain.constraints=this.constraints=this.constraints||[];this.constraints.push(this.objects["ctnt/"+a.name]=a.tag=b)};
THREE.SEA3D.Domain.prototype.enabledPhysics=function(a){for(var b=this.rigidBodies?this.rigidBodies.length:0;b--;)SEA3D.AMMO.setEnabledRigidBody(this.rigidBodies[b],a)};THREE.SEA3D.Domain.prototype.applyContainerTransform=function(){this.container.updateMatrix();var a=this.container.matrix.clone();this.container.position.set(0,0,0);this.container.rotation.set(0,0,0);this.container.scale.set(1,1,1);this.applyTransform(a)};
THREE.SEA3D.Domain.prototype.applyTransform=function(a){for(var b=THREE.SEA3D.MTXBUF,c=THREE.SEA3D.VECBUF,d=this.rigidBodies?this.rigidBodies.length:0,k=this.container?this.container.children:[],f=[];d--;){var e=this.rigidBodies[d],g=SEA3D.AMMO.getTargetByRigidBody(e),h=e.getWorldTransform(),h=SEA3D.AMMO.getMatrixFromTransform(h);h.multiplyMatrices(h,a);h=SEA3D.AMMO.getTransformFromMatrix(h);e.setWorldTransform(h);g&&f.push(g)}for(d=0;d<k.length;d++)e=k[d],-1<f.indexOf(e)||(e.updateMatrix(),b.copy(e.matrix),
b.multiplyMatrices(a,b),e.position.setFromMatrixPosition(b),e.scale.setFromMatrixScale(b),b.scale(c.set(1/e.scale.x,1/e.scale.y,1/e.scale.z)),e.rotation.setFromRotationMatrix(b))};THREE.SEA3D.Domain.prototype.getShape=THREE.SEA3D.prototype.getShape=function(a){return this.objects["shpe/"+a]};THREE.SEA3D.Domain.prototype.getRigidBody=THREE.SEA3D.prototype.getRigidBody=function(a){return this.objects["rb/"+a]};
THREE.SEA3D.Domain.prototype.getConstraint=THREE.SEA3D.prototype.getConstraint=function(a){return this.objects["ctnt/"+a]};
THREE.SEA3D.EXTENSIONS_LOADER.push({parse:function(){delete this.shapes;delete this.rigidBodies;delete this.vehicles;delete this.constraints},setTypeRead:function(){this.config.physics=void 0!==this.config.physics?this.config.physics:!0;this.config.convexHull=void 0!==this.config.convexHull?this.config.convexHull:!0;this.config.enabledPhysics=void 0!==this.config.enabledPhysics?this.config.enabledPhysics:!0;this.config.physics&&(this.file.typeRead[SEA3D.Sphere.prototype.type]=this.readSphere,this.file.typeRead[SEA3D.Box.prototype.type]=
this.readBox,this.file.typeRead[SEA3D.Capsule.prototype.type]=this.readCapsule,this.file.typeRead[SEA3D.Cone.prototype.type]=this.readCone,this.file.typeRead[SEA3D.Cylinder.prototype.type]=this.readCylinder,this.file.typeRead[SEA3D.ConvexGeometry.prototype.type]=this.readConvexGeometry,this.file.typeRead[SEA3D.TriangleGeometry.prototype.type]=this.readTriangleGeometry,this.file.typeRead[SEA3D.Compound.prototype.type]=this.readCompound,this.file.typeRead[SEA3D.P2PConstraint.prototype.type]=this.readP2PConstraint,
this.file.typeRead[SEA3D.HingeConstraint.prototype.type]=this.readHingeConstraint,this.file.typeRead[SEA3D.ConeTwistConstraint.prototype.type]=this.readConeTwistConstraint,this.file.typeRead[SEA3D.RigidBody.prototype.type]=this.readRigidBody,this.file.typeRead[SEA3D.CarController.prototype.type]=this.readCarController)}});
THREE.SEA3D.EXTENSIONS_DOMAIN.push({dispose:function(){var a;for(a=this.rigidBodies?this.rigidBodies.length:0;a--;)SEA3D.AMMO.removeRigidBody(this.rigidBodies[a],!0);for(a=this.vehicles?this.vehicles.length:0;a--;)SEA3D.AMMO.removeVehicle(this.vehicles[a],!0);for(a=this.constraints?this.constraints.length:0;a--;)SEA3D.AMMO.removeConstraint(this.constraints[a],!0);for(a=this.shapes?this.shapes.length:0;a--;)Ammo.destroy(this.shapes[a])}});
